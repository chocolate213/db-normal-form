# 数据库范式（Normal Form）
## 第一范式(First Normal Form)
 设定一个关系为R(U)，若U中的每一个属都是不可再分的，或者说都是不被其他属性所包含的独立属性，则称关系R(U)是符合第一范式的（first normal form），第一范式又称1NF。第一范式强调的是列的原子性，即列不能再分成其他几列。

解释：
* 不能是复合属性，如果存在，应该拆分为多个属性
* 不能是多值属性，如果存在，应该建立一个实体，而让此属性与其存在1对多的关系)
* 不能是重复属性

## 第二范式(Second Normal Form)
  设定一个关系为R(U)，它是满足第一范式的，若R中不存在非主属性对候选码的`部分函数依赖`，则称该关系是符合第二范式（second normal form）的，第二范式又称2NF。
> `部分函数依赖`：设定一个关系R(U)，X和Y为属性集U上的子集，若X函数决定Y，同时函数X的一个真子集X'也能函数决定Y，则称X部分函数决定Y，或者Y部分函数依赖X；否则如如果不存在X的一个真子集X'，使得X'也能函数决定Y，则称X完全函数决定Y，或者Y完全函数依赖于X。同样如果X为单属性，则不存在X的真子集X',也就不存在任何X'决定任何其他每个属性的情况存在。例如:设定职工关系为（职工号，姓名，性别，年龄，职务），职工号作为单属性可以函数决定其他属性，另外（职工号，性别）可以决定相应职工的年龄，但是职工号也能函数决定年龄，所以（职工号，性别）到年龄之间的函数依赖为部分函数依赖。

`非主属性对候选码的部分函数依赖`：两个及以上的字段作为主键时（单主键如果满足第一范式则一定满足第二范式），如果主键字段中存在真子集可以函数决定非主属性字段，则认为该关系中存在部分函数依赖，不符合第二范式。

解释：
* 表中必须存在侯选关键字，即每一行不同于其他任一行，是惟一区分的
* 任何非关键字段不能依赖于侯选关键字的一部分

## 第三范式(Third Normal Form)
  设定一个关系为R(U)，它是满足第一范式的，若R中不存在非主属性对候选码的`传递函数依赖`，则称该关系是符合第三范式（third normal form）的，第三范式又称3NF。
> `传递函数依赖`: 设定一个关系R(U)，X、Y、Z为属性集U上的子集，其中存在X函数决定Y，Y函数决定Z，且Y不能函数决定X，Y不是Z的子集，称此为传递函数依赖。
例如：一个学生关系为（学号，姓名，性别，系号，系名，系主任名），其中学号函数决定姓名、性别、系号，系号函数决定系名、系主任名，所以给定一个学号之后就能唯一确定系名和系主任名，所以该关系中还存在学号函数决定系名、系主任名这两个函数依赖，由于他们是通过从学号开始的简介函数依赖得到的，所以系名和系主任名是传递依赖于学号。

解释：
* 非关键字字段必须直接依赖任一侯选关键字
* 非关键字段C不能依赖非侯选关键字B，因为样会形成传递依赖：侯选关键字A=>B=>C，因为这时的B往往是外键，即其他表的主键，也就是说表中不能含有其他表的非主属性
## BC范式(Boyce-Codd Normal form)
  设定一个关系为R(U)，它是满足第一范式的，若R中不存在`任何属性`对候选码的`传递函数依赖`，则称R是符合BC范式的。第三范式中没有强调主属性是否传递依赖于候选码，BC范式中要求主属性，非主属性都不能函数依赖于候选码。所有满足第三范式的关系，如果只存在单个候选码，则不存在主属性对候选码的部分依赖或传递依赖，因此都符合BCNF的要求。

  与第三范式相比，BC范式相当于增加了主属性不能传递依赖于主属性。

解释：
* 与第三范式相比，一个是“任何非关键字段不能”，一个是“任何字段不能”，显然更严格了
* 侯选关键字或其部分字段不能传递依赖其他的侯选关关键字
